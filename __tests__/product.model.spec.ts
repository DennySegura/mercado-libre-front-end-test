import 'jest';
import Product from '../src/api/components/product/model.ts';

const bodyItem = {
  "sold_quantity": undefined,
  "description": undefined,
  "id": "MLA716454202",
  "site_id": "MLA",
  "title": "Smart Tv 4k 50 Samsung Un50mu6100",
  "subtitle": null,
  "seller_id": 143125485,
  "category_id": "MLA390289",
  "official_store_id": 229,
  "price": 21999,
  "base_price": 21999,
  "original_price": 23199,
  "currency_id": "ARS",
  "initial_quantity": 1995,
  "available_quantity": 500,
  "sold_quantity": 500,
  "sale_terms": [
  ],
  "buying_mode": "buy_it_now",
  "listing_type_id": "gold_special",
  "start_time": "2018-04-03T20:56:01.000Z",
  "stop_time": "2038-06-10T06:57:41.000Z",
  "condition": "new",
  "permalink": "https://articulo.mercadolibre.com.ar/MLA-716454202-smart-tv-4k-50-samsung-un50mu6100-_JM",
  "thumbnail": "http://mla-s1-p.mlstatic.com/849004-MLA27124959188_042018-I.jpg",
  "secure_thumbnail": "https://mla-s1-p.mlstatic.com/849004-MLA27124959188_042018-I.jpg",
  "pictures": [
    {
      "id": "849004-MLA27124959188_042018",
      "url": "http://mla-s1-p.mlstatic.com/849004-MLA27124959188_042018-O.jpg",
      "secure_url": "https://mla-s1-p.mlstatic.com/849004-MLA27124959188_042018-O.jpg",
      "size": "500x500",
      "max_size": "1000x1000",
      "quality": ""
    },
    {
      "id": "952531-MLA27124959187_042018",
      "url": "http://mla-s1-p.mlstatic.com/952531-MLA27124959187_042018-O.jpg",
      "secure_url": "https://mla-s1-p.mlstatic.com/952531-MLA27124959187_042018-O.jpg",
      "size": "500x500",
      "max_size": "1000x1000",
      "quality": ""
    },
    {
      "id": "925923-MLA27124959189_042018",
      "url": "http://mla-s1-p.mlstatic.com/925923-MLA27124959189_042018-O.jpg",
      "secure_url": "https://mla-s1-p.mlstatic.com/925923-MLA27124959189_042018-O.jpg",
      "size": "500x500",
      "max_size": "1000x1000",
      "quality": ""
    },
    {
      "id": "974332-MLA27124959186_042018",
      "url": "http://mla-s1-p.mlstatic.com/974332-MLA27124959186_042018-O.jpg",
      "secure_url": "https://mla-s1-p.mlstatic.com/974332-MLA27124959186_042018-O.jpg",
      "size": "500x500",
      "max_size": "1000x1000",
      "quality": ""
    }
  ],
  "video_id": null,
  "descriptions": [
    {
      "id": "MLA716454202-1628934563"
    }
  ],
  "accepts_mercadopago": true,
  "non_mercado_pago_payment_methods": [
  ],
  "shipping": {
    "mode": "custom",
    "methods": [
    ],
    "tags": [
    ],
    "dimensions": "105x45x45,100",
    "local_pick_up": false,
    "free_shipping": false,
    "logistic_type": "custom",
    "store_pick_up": true
  },
  "international_delivery_mode": "none",
  "seller_address": {
    "comment": "",
    "address_line": "",
    "zip_code": "",
    "city": {
      "id": "TUxBQkJBTDMxMDZa",
      "name": "Balvanera"
    },
    "state": {
      "id": "AR-C",
      "name": "Capital Federal"
    },
    "country": {
      "id": "AR",
      "name": "Argentina"
    },
    "search_location": {
      "neighborhood": {
        "id": "TUxBQkJBTDMxMDZa",
        "name": "Balvanera"
      },
      "city": {
        "id": "TUxBQ0NBUGZlZG1sYQ",
        "name": "Capital Federal"
      },
      "state": {
        "id": "TUxBUENBUGw3M2E1",
        "name": "Capital Federal"
      }
    },
    "latitude": -34.607677,
    "longitude": -58.408665,
    "id": 154566437
  },
  "seller_contact": null,
  "location": {
  },
  "geolocation": {
    "latitude": -34.607677,
    "longitude": -58.408665
  },
  "coverage_areas": [
  ],
  "attributes": [
    {
      "id": "BRAND",
      "name": "Marca",
      "value_id": "206",
      "value_name": "Samsung",
      "value_struct": null,
      "attribute_group_id": "MAIN",
      "attribute_group_name": "Principales"
    },
    {
      "id": "EAN",
      "name": "EAN",
      "value_id": null,
      "value_name": "7798180335939",
      "value_struct": null,
      "attribute_group_id": "OTHERS",
      "attribute_group_name": "Otros"
    },
    {
      "id": "GTIN",
      "name": "Código universal de producto",
      "value_id": null,
      "value_name": "7798180335939",
      "value_struct": null,
      "attribute_group_id": "OTHERS",
      "attribute_group_name": "Otros"
    },
    {
      "id": "ITEM_CONDITION",
      "name": "Condición del ítem",
      "value_id": "2230284",
      "value_name": "Nuevo",
      "value_struct": null,
      "attribute_group_id": "OTHERS",
      "attribute_group_name": "Otros"
    },
    {
      "id": "SCREEN_SIZE",
      "name": "Tamaño de pantalla",
      "value_id": null,
      "value_name": "50 in",
      "value_struct": {
        "number": 50,
        "unit": "in"
      },
      "attribute_group_id": "OTHERS",
      "attribute_group_name": "Otros"
    },
    {
      "id": "SMART_TV",
      "name": "Smart TV",
      "value_id": "242085",
      "value_name": "Sí",
      "value_struct": null,
      "attribute_group_id": "OTHERS",
      "attribute_group_name": "Otros"
    }
  ],
  "warnings": [
  ],
  "listing_source": "",
  "variations": [
  ],
  "status": "active",
  "sub_status": [
  ],
  "tags": [
    "good_quality_picture",
    "brand_verified",
    "good_quality_thumbnail",
    "immediate_payment"
  ],
  "warranty": null,
  "catalog_product_id": "MLA8679275",
  "domain_id": "MLA-TELEVISIONS",
  "parent_item_id": null,
  "differential_pricing": null,
  "deal_ids": [
    "MLA650",
    "MLA651",
    "MLA661"
  ],
  "automatic_relist": false,
  "date_created": "2018-04-03T20:56:02.000Z",
  "last_updated": "2018-06-30T04:14:27.465Z",
  "health": null
}
const modelResponse = {
  "id": "MLA716454202",
  "title": "Smart Tv 4k 50 Samsung Un50mu6100",
  "price": {
    "decimals": 0,
    "amount": 21999,
    "currency": "ARS"
  },
  "picture": "http://mla-s1-p.mlstatic.com/849004-MLA27124959188_042018-I.jpg",
  "condition": "new",
  "free_shipping": false
};
const itemPrice = {
  "decimals": 0,
  "amount": 21999,
  "currency": "ARS"
}

describe('Product model test suites', () => {
  it('it should show a product title from availability item respones', () => {
    const product = new Product(bodyItem);
    expect(product.item.title).toBe(modelResponse.title);
  });
  it('it should create a product price from availability item response', () => {
    const product = new Product(bodyItem);
    expect(product.item.price).toMatchObject(itemPrice);
  });
  it('it should get correctly array of keys from availability product', () => {
    expect(Object.keys(modelResponse)).toEqual(expect.arrayContaining(['id','title','price','picture','condition','free_shipping']))
  });
});
